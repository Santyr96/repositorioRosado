import{c as i}from"./close-modal-McXQp2uh.js";function f(){const r=document.forms.fForm,e=document.querySelectorAll(".validate-span");r.addEventListener("submit",async function(t){t.preventDefault();const o=new FormData(r);try{const n=this.getAttribute("data-form");n||(console.error("La URL para actualizar el perfil no está definida."),c("Error interno. Intenta más tarde."));const a=await fetch(n,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:o});if(!a.ok){const s=await a.json();throw new Error(s.error)}const l=await a.json();l?(d(l.success),e.forEach(s=>{s.textContent=""})):c("Error al actualizar el perfil.")}catch(n){c(n)}})}function c(r){const e=document.getElementById("errorModal"),t=e.querySelector("p"),o=document.getElementById("errorModalTitle");t&&(t.textContent=r),o&&(o.textContent="Error al envíar el formulario"),e&&e.classList.toggle("hidden"),i()}function d(r){const e=document.getElementById("errorModal"),t=e.querySelector("p"),o=document.getElementById("errorModalTitle");t&&(t.textContent=r),o&&(o.textContent="¡Éxito!"),e&&e.classList.toggle("hidden"),i()}export{f as u};
