import{c as i}from"./close-modal-McXQp2uh.js";function f(){const r=document.forms.fForm,e=document.querySelectorAll(".validate-span"),t=document.getElementById("welcomeMessage");r.addEventListener("submit",async function(o){o.preventDefault();const d=new FormData(r);try{const n=this.getAttribute("data-form");n||(console.error("La URL para actualizar el perfil no está definida."),l("Error interno. Intenta más tarde."));const a=await fetch(n,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:d});if(!a.ok){const c=await a.json();throw new Error(c.error)}const s=await a.json();s?(m(s.success),e.forEach(c=>{c.textContent=""}),t.textContent="Hola, "+s.username):l("Error al actualizar el perfil.")}catch(n){l(n)}})}function l(r){const e=document.getElementById("errorModal"),t=e.querySelector("p"),o=document.getElementById("errorModalTitle");t&&(t.textContent=r),o&&(o.textContent="Error al envíar el formulario"),e&&e.classList.toggle("hidden"),i()}function m(r){const e=document.getElementById("errorModal"),t=e.querySelector("p"),o=document.getElementById("errorModalTitle");t&&(t.textContent=r),o&&(o.textContent="¡Éxito!"),e&&e.classList.toggle("hidden"),i()}export{f as u};
