function v(){const a=document.getElementById("modal"),c=document.getElementById("avatarUpload"),d=document.querySelectorAll("[data-modal-hide]"),e=document.forms.avatarForm,r=e.avatar;c&&c.addEventListener("click",function(){a.classList.remove("hidden")}),d&&d.forEach(n=>{n.addEventListener("click",function(){a.classList.add("hidden"),r.value=""})}),e&&r&&e.addEventListener("submit",async function(n){n.preventDefault();const i=r.files[0];i||alert("Por favor, selecciona un archivo.");const l=new FormData;l.append("avatar",i);try{const t=this.getAttribute("data-avatar");t||(console.error("La URL para subir el avatar no está definida."),alert("Error interno. Intenta más tarde."));const o=await fetch(t,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:l});if(!o.ok)throw new Error(`Error en la solicitud: ${o.status}`);const s=await o.json();if(s.avatar_url){const u=document.getElementById("avatar"),m=document.getElementById("headerAvatar");u&&(u.src=s.avatar_url,m.src=s.avatar_url),a&&a.classList.add("hidden")}else alert("Error al actualizar el avatar.")}catch(t){console.error("Error:",t),alert("Ocurrió un error al subir la imagen. Intenta nuevamente.")}})}export{v as u};
